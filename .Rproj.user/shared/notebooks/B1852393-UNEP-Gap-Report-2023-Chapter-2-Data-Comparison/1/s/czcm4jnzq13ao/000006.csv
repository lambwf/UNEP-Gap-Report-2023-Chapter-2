"0",""
"0","wd_primap <- primap %>% "
"0","  mutate(gas=ifelse(gas==""KYOTOGHG (AR4GWP100)"",""GHG"",gas)) %>% "
"0","  mutate(gas=ifelse(gas==""FGASES (AR4GWP100)"",""Fgas"",gas)) %>% "
"0","  filter(gas %in% c(""CO2"",""CH4"",""N2O"",""Fgas"",""GHG""))"
"0",""
"0","load('Data/cc_gwps.RData')"
"0","wd_primap <- left_join(wd_primap,cc_gwps %>% select(gas,gwp100_ar4))"
"1","[38;5;232mJoining with `by = join_by(gas)`[39m
"
"0","wd_primap <- wd_primap %>% "
"0","  mutate(gwp100_ar4=ifelse(gas==""GHG"",1,gwp100_ar4)) %>% "
"0","  mutate(gwp100_ar4=ifelse(gas==""Fgas"",1,gwp100_ar4)) %>% "
"0","  mutate(value=value*gwp100_ar4) %>% "
"0","  mutate(value=value*1000)"
"0",""
"0",""
"0","wd_inventory <- read.xlsx('Data/Not public/Emissions data Inventories G20 economies.xlsx')"
"0","wd_inventory <- gather(wd_inventory,year,value,`1990`:`2022`) %>% "
"0","  filter(GWP==""AR4"") %>% "
"0","  mutate(iso=countrycode(sourcevar=Country,origin=""country.name"",destination=""iso3c"")) %>% "
"0","  mutate(year=as.numeric(year)) %>% "
"0","  select(iso,country=Country,var=Variable,year,ch3_inventory=value) %>% "
"0","  mutate(ch3_inventory=ch3_inventory*1e6) %>% "
"0","  mutate(iso=ifelse(is.na(iso),country,iso))"
"2","Warnung:"
"2"," [38;5;232mThere was 1 warning in `mutate()`.[39m
[38;5;232m[36mi[38;5;232m In argument: `iso = countrycode(sourcevar = Country, origin = ""country.name"", destination = ""iso3c"")`.[39m
Caused by warning in `countrycode_convert()`:
[33m![39m Some values were not matched unambiguously: EU27
"
"0","wd_all <- gather(edgar_ghg_ar4,gas,value,CH4:GHG) %>% "
"0","  group_by(iso,country,year,gas) %>% "
"0","  summarise(edgar=sum(value,na.rm=TRUE))"
"1","[38;5;232m`summarise()` has grouped output by 'iso', 'country', 'year'. You can override using the `.groups` argument.[39m
"
"0","wd_all <- left_join(wd_all,country_aggregations %>% select(iso,G20,EU))"
"1","[38;5;232mJoining with `by = join_by(iso)`[39m
"
"0","wd_all <- left_join(wd_all,wd_primap %>% "
"0","                      group_by(iso,year,gas) %>% "
"0","                      summarise(primap=sum(value)),"
"0","                    by = join_by(iso, year,gas))"
"1","[38;5;232m`summarise()` has grouped output by 'iso', 'year'. You can override using the `.groups` argument.[39m
"
"0","eu <- wd_all %>% "
"0","  filter(EU==1) %>% "
"0","  group_by(year,gas) %>% "
"0","  summarise(edgar=sum(edgar,na.rm=T),"
"0","            primap=sum(primap,na.rm=T)) %>% "
"0","  mutate(iso=""EU27"") %>% "
"0","  mutate(country=""EU27"") %>% "
"0","  mutate(G20=1)"
"1","[38;5;232m`summarise()` has grouped output by 'year'. You can override using the `.groups` argument.[39m
"
"0","wd_all <- rbind(wd_all %>% filter(is.na(EU)),eu) %>% "
"0","  select(-EU)"
"0",""
"0",""
"0","wd_all <- left_join(wd_all,wd_inventory %>% "
"0","                      filter(var==""Excl. LULUCF GHG"") %>% "
"0","                      select(-country,-var) %>% "
"0","                      mutate(gas=""GHG""),"
"0","                    by = join_by(iso, year,gas))"
"0",""
"0",""
"0","wd_all <- wd_all %>% "
"0","  filter(G20==1) %>% "
"0","  filter(gas==""GHG"") %>% "
"0","  select(-G20,-gas) %>% "
"0","  mutate(inventory_vs_edgar=(edgar/ch3_inventory)-1) %>% "
"0","  mutate(inventory_vs_primap=(primap/ch3_inventory)-1)"
"0",""
"0",""
"0","gather(wd_all,dataset,value,edgar,primap,ch3_inventory) %>% "
"0","  ggplot(.,aes(x=year,y=value/1e6,group=dataset,color=dataset)) +"
"0","  geom_line(linewidth=0.7) +"
"0","  scale_x_continuous(limits=c(1990,2021)) +"
"0","  scale_y_continuous(limits=c(0,NA)) +"
"0","  scale_color_brewer(palette=""Set2"") +"
"0","  facet_wrap(.~country,scales=""free"",ncol=4) +"
"0","  theme_wl() +"
"0","  theme(legend.position=""bottom"","
"0","        legend.title=element_blank(),"
"0","        axis.title = element_blank(),"
"0","        strip.background = element_blank(),"
"0","        strip.text = element_text(size=11,hjust=0),"
"0","        panel.border = element_blank(),"
"0","        axis.line.x.bottom = element_line(color=""#636363""),"
"0","        axis.line.y.left = element_line(color=""#636363"")) +"
"0","  labs(title=""Greenhouse gas emissions trends of the G20 across datasets"","
"0","       subtitle=""MtCO2e (excluding CO2-LULUCF)"")"
"2","Warnung:"
"2"," [38;5;232mRemoved 63 rows containing missing values (`geom_line()`).[39m
"
